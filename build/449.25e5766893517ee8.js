"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[449],{1449:(_,g,u)=>{u.r(g),u.d(g,{AuthModule:()=>C});var m=u(6895),d=u(5861),i=u(433),f=u(5226),c=u.n(f),e=u(4650),h=u(5763),s=u(4591),v=u(9883);function b(r,a){1&r&&(e.TgZ(0,"div",25),e._uU(1," El Email es requerido "),e.qZA())}function Z(r,a){1&r&&(e.TgZ(0,"div",25),e._uU(1," Password es requerido "),e.qZA())}const y=function(){return{"background-image":"url(/assets/images/others/219x452.png)"}};let U=(()=>{class r{constructor(t,o,n,l,p){this.userService=t,this.router=o,this.route=n,this.rolesService=l,this.formBuilder=p}ngOnInit(){this.formGroup=this.formBuilder.group({email:["",i.kI.required],password:["",i.kI.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onLoggedin(t){var o=this;return(0,d.Z)(function*(){if(t.preventDefault(),o.formGroup)try{const n=o.formGroup.get("email").value,l=o.formGroup.get("password").value;if(!n||!l)return void c().fire("Error","Debe ingresar su correo electr\xf3nico y contrase\xf1a.","error");(yield o.userService.login({email:n,password:l}))?(localStorage.setItem("isLoggedin","true"),o.assignRole(),o.router.navigate([o.returnUrl])):c().fire("Error","Usuario no registrado o correo electr\xf3nico o contrase\xf1a incorrectos.","error")}catch(n){console.error(n),c().fire("Error","Ocurri\xf3 un error de autenticaci\xf3n. Por favor, intente m\xe1s tarde.","error")}})()}assignRole(){var t=this;return(0,d.Z)(function*(){const o=yield t.userService.getCurrentUser();if(!(yield t.rolesService.getRoleByUserId(o.uid))){const l="Aspirante";yield t.rolesService.assignRole(o.uid,l)}})()}loginWithGoogle(){var t=this;return(0,d.Z)(function*(){try{const o=yield t.userService.loginWithGoogle();if(o){const n=o.user,l=n.email,p=n.photoURL,I=n.displayName;localStorage.setItem("isLoggedin","true"),localStorage.setItem("email",l),localStorage.setItem("photoURL",p),localStorage.setItem("displayName",I),t.router.navigate(["/general/profile"])}t.assignRole()}catch(o){console.error(o),c().fire("Error","Ocurri\xf3 un error de autenticaci\xf3n con Google. Por favor, intente m\xe1s tarde.","error")}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.K),e.Y36(s.F0),e.Y36(s.gz),e.Y36(v.f),e.Y36(i.qu))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:37,vars:6,consts:[[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-4","pe-md-0"],[1,"auth-side-wrapper",3,"ngStyle"],[1,"col-md-8","ps-md-0"],[1,"auth-form-wrapper","px-4","py-5"],["routerLink",".",1,"nobleui-logo","d-block","mb-2",2,"color","#FFB600"],[1,"mx-2",2,"color","darkblue","background-color","transparent"],[1,"text-muted","fw-normal","mb-4"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","emailInput","placeholder","Email","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","passwordInput","autocomplete","current-password","placeholder","Password","formControlName","password",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","id","authCheck",1,"form-check-input"],["for","authCheck",1,"form-check-label"],["type","submit",1,"btn","btn-primary","me-2","mb-2","mb-md-0",3,"disabled"],["type","button",1,"btn","btn-outline-primary","btn-icon-text","mb-2","mb-md-0",3,"click"],[1,"feather","icon-google","bbtn-icon-prepend"],["routerLink","/auth/register",1,"d-block","mt-3","text-muted"],[1,"text-danger"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7)(8,"a",8),e._uU(9,"Empleate"),e.TgZ(10,"span",9),e._uU(11,"INTEBIEN"),e.qZA()(),e.TgZ(12,"h5",10),e._uU(13," Bienvenido a la plataforma de emplos de INTEBIEN "),e.qZA(),e.TgZ(14,"form",11),e.NdJ("ngSubmit",function(l){return o.onLoggedin(l)}),e.TgZ(15,"div",12)(16,"label",13),e._uU(17,"Email"),e.qZA(),e._UZ(18,"input",14),e.YNc(19,b,2,0,"div",15),e.qZA(),e.TgZ(20,"div",12)(21,"label",16),e._uU(22,"Contrase\xf1a"),e.qZA(),e._UZ(23,"input",17),e.YNc(24,Z,2,0,"div",15),e.qZA(),e.TgZ(25,"div",18),e._UZ(26,"input",19),e.TgZ(27,"label",20),e._uU(28,"Recordar secci\xf3n"),e.qZA()(),e.TgZ(29,"div")(30,"button",21),e._uU(31," Acceso "),e.qZA(),e.TgZ(32,"button",22),e.NdJ("click",function(){return o.loginWithGoogle()}),e._UZ(33,"i",23),e._uU(34," Ingresa con Google "),e.qZA()(),e.TgZ(35,"a",24),e._uU(36,"\xbfNo esta registrado? inscribase aqu\xed"),e.qZA()()()()()()()()),2&t){let n,l;e.xp6(5),e.Q6J("ngStyle",e.DdM(5,y)),e.xp6(9),e.Q6J("formGroup",o.formGroup),e.xp6(5),e.Q6J("ngIf",(null==o.formGroup||null==(n=o.formGroup.get("email"))?null:n.invalid)&&(null==o.formGroup||null==(n=o.formGroup.get("email"))?null:n.touched)),e.xp6(5),e.Q6J("ngIf",(null==o.formGroup||null==(l=o.formGroup.get("password"))?null:l.invalid)&&(null==o.formGroup||null==(l=o.formGroup.get("password"))?null:l.touched)),e.xp6(6),e.Q6J("disabled",o.formGroup.invalid)}},dependencies:[m.O5,m.PC,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,s.yS],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}"]}),r})();const T=function(){return{"background-image":"url(/assets/images/others/219x452.png)"}},A=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-auth"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[s.lC],encapsulation:2}),r})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:U},{path:"register",component:(()=>{class r{constructor(t){this.router=t}ngOnInit(){}onRegister(t){t.preventDefault(),localStorage.setItem("isLoggedin","true"),localStorage.getItem("isLoggedin")&&this.router.navigate(["/"])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(s.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:39,vars:2,consts:[[1,"row","w-100","mx-0","auth-page"],[1,"col-md-8","col-xl-6","mx-auto"],[1,"card"],[1,"row"],[1,"col-md-4","pe-md-0"],[1,"auth-side-wrapper",3,"ngStyle"],[1,"col-md-8","ps-md-0"],[1,"auth-form-wrapper","px-4","py-5"],["routerLink",".",1,"nobleui-logo","d-block","mb-2",2,"color","#FFB600"],[1,"mx-2",2,"color","darkblue","background-color","transparent"],[1,"text-muted","fw-normal","mb-4"],[1,"forms-sample"],[1,"mb-3"],["for","exampleInputUsername1",1,"form-label"],["type","text","id","exampleInputUsername1","autocomplete","Username","placeholder","Username",1,"form-control"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","placeholder","Email",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","autocomplete","current-password","placeholder","Password",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","id","authCheck",1,"form-check-input"],["for","authCheck",1,"form-check-label"],["type","submit",1,"btn","btn-primary","me-2","mb-2","mb-md-0",3,"click"],["type","button",1,"btn","btn-outline-primary","btn-icon-text","mb-2","mb-md-0"],[1,"feather","icon-twitter","btn-icon-prepend"],["routerLink","/auth/login",1,"d-block","mt-3","text-muted"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7)(8,"a",8),e._uU(9,"Empleate"),e.TgZ(10,"span",9),e._uU(11,"INTEBIEN"),e.qZA()(),e.TgZ(12,"h5",10),e._uU(13,"Crear una cuenta."),e.qZA(),e.TgZ(14,"form",11)(15,"div",12)(16,"label",13),e._uU(17,"Usuario"),e.qZA(),e._UZ(18,"input",14),e.qZA(),e.TgZ(19,"div",12)(20,"label",15),e._uU(21,"Email"),e.qZA(),e._UZ(22,"input",16),e.qZA(),e.TgZ(23,"div",12)(24,"label",17),e._uU(25,"Contrase\xf1a"),e.qZA(),e._UZ(26,"input",18),e.qZA(),e.TgZ(27,"div",19),e._UZ(28,"input",20),e.TgZ(29,"label",21),e._uU(30," Recordar "),e.qZA()(),e.TgZ(31,"div")(32,"button",22),e.NdJ("click",function(l){return o.onRegister(l)}),e._uU(33,"Inscribirse"),e.qZA(),e.TgZ(34,"button",23),e._UZ(35,"i",24),e._uU(36," Reg\xedstrate con Google "),e.qZA()(),e.TgZ(37,"a",25),e._uU(38,"\xbfYa eres usuario? Iniciar sesi\xf3n"),e.qZA()()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngStyle",e.DdM(1,T)))},dependencies:[m.PC,i._Y,i.JL,i.F,s.yS],styles:["[_nghost-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}"]}),r})()}]}];let C=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,i.u5,i.UX,s.Bz.forChild(A)]}),r})()}}]);